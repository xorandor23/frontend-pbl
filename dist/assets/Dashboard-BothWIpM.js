import{_ as B,a as R,F as q}from"./Footer-I6MyOEBl.js";import{_ as g,a as C,b as f}from"./CardNews-CT0aRdGL.js";import{I}from"./IconNewSeen-CFaQsvd5.js";import{r as l,o as J,c,a as x,b as a,d as i,e as h,F as _,f as w,g as o,u as y}from"./index-Bjct3aZW.js";const V={key:0},z={class:"sticky top-0 z-100"},L={class:"sm:px-8 lg:px-16 py-5"},O={class:"w-full h-full py-5 overflow-x-auto"},W={class:"flex flex-nowrap gap-x-7 py-5"},H={class:"sm:px-8 lg:px-16 py-5"},P={class:"w-full h-full py-5 overflow-x-auto"},U={class:"flex flex-nowrap gap-x-7 py-5"},Y={class:"sm:px-8 lg:px-16 py-5"},K={class:"w-full h-full py-5 overflow-x-auto"},Q={class:"flex flex-nowrap gap-x-7 py-5"},X={key:1,class:"flex items-center justify-center text-center h-screen py-10 text-slate-500"},Z={class:"animate-spin"},ee={key:2,class:"flex items-center justify-center text-center h-screen py-10 text-slate-500"},re={__name:"Dashboard",setup(te){const $=l([]),n=l("2"),u=l("1"),v=l(null),m=l(),k=l(),b=l(),d="10.10.30.2:8000",p=e=>{const t=new Date(e),s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],S=s[t.getDay()],D=t.getDate(),T=r[t.getMonth()],A=t.getFullYear();return`${S}, ${D} ${T} ${A}`};function j(e){const s=`; ${document.cookie}`.split(`; ${e}=`);if(s.length===2)return s.pop().split(";").shift()}const E=async()=>{try{const e=await fetch("http://10.10.30.2:8000/api/myinfo",{method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${j("access_token")}`}}),t=await e.json();if(console.log(t),e.ok)t.username?(u.value="2",v.value=t.username):u.value="1";else throw new Error(t.message||`Request gagal: ${e.status}`);n.value="1"}catch(e){u.value="1",n.value="3",console.log(e)}},F=async()=>{try{const e=await fetch("http://10.10.30.2:8000/api/berita/category/1",{method:"GET",headers:{accept:"application/json"}}),t=await e.json();if(console.log(t),!e.ok)throw new Error(t.message||`Request gagal: ${e.status}`);m.value=t}catch(e){console.log(e)}},N=async()=>{try{const e=await fetch("http://10.10.30.2:8000/api/berita/category/2",{method:"GET",headers:{accept:"application/json"}}),t=await e.json();if(console.log(t),!e.ok)throw new Error(t.message||`Request gagal: ${e.status}`);k.value=t}catch(e){console.log(e)}},G=async()=>{try{const e=await fetch("http://10.10.30.2:8000/api/berita/category/3",{method:"GET",headers:{accept:"application/json"}}),t=await e.json();if(console.log(t),!e.ok)throw new Error(t.message||`Request gagal: ${e.status}`);b.value=t}catch(e){console.log(e)}},M=async()=>{try{const e=await fetch("https://jsonplaceholder.typicode.com/posts");if(!e.ok)throw new Error("Gagal mengambil berita");const t=await e.json();$.value=t.slice(0,5).map(s=>({title:s.title,description:s.body,image:"https://picsum.photos/400/250?random="+Math.random()}))}catch(e){throw console.error("Error fetchNews:",e),e}};return J(async()=>{n.value="2";try{await Promise.all([E(),M(),F(),N(),G()]),n.value="1"}catch(e){console.error("Gagal inisialisasi dashboard:",e),n.value="3"}}),(e,t)=>n.value==="1"?(o(),c("div",V,[a("nav",z,[i(B,{status:u.value,user:v.value},null,8,["status","user"]),i(R)]),a("div",null,[u.value==="1"?(o(),h(C,{key:0,tips:"Sign in or register to enjoy premium breaking news and interact with other users."})):x("",!0),i(g,{title:"What's up, AI!",subtitle:"See the latest news and breaking updates about artificial intelligence."})]),a("div",L,[a("div",O,[a("div",W,[(o(!0),c(_,null,w(m.value,(s,r)=>(o(),h(f,{key:r,id:s.id_berita,title:s.judul,highlight:s.isi,link:`http://${y(d)}/storage/${s.gambar}`,date:p(s.tgl_terbit)},null,8,["id","title","highlight","link","date"]))),128))])])]),a("div",null,[i(g,{title:"Get ready for New Mobile",subtitle:"Here's what our readers are recommending and appreciating."})]),a("div",H,[a("div",P,[a("div",U,[(o(!0),c(_,null,w(k.value,(s,r)=>(o(),h(f,{key:r,id:s.id_berita,title:s.judul,highlight:s.isi,link:`http://${y(d)}/storage/${s.gambar}`,date:p(s.tgl_terbit)},null,8,["id","title","highlight","link","date"]))),128))])])]),a("div",null,[i(g,{title:"Everything news",subtitle:"A collection of our most recent news and articles."})]),a("div",Y,[a("div",K,[a("div",Q,[(o(!0),c(_,null,w(b.value,(s,r)=>(o(),h(f,{key:r,id:s.id_berita,title:s.judul,highlight:s.isi,link:`http://${y(d)}/storage/${s.gambar}`,date:p(s.tgl_terbit)},null,8,["id","title","highlight","link","date"]))),128))])])]),i(q)])):n.value==="2"?(o(),c("div",X,[a("div",Z,[i(I)])])):n.value==="3"?(o(),c("div",ee,[...t[0]||(t[0]=[a("div",null," Oh no, we couldn't reach the server right now. Check your internet connection or refresh the page back. ",-1)])])):x("",!0)}};export{re as default};
