import{r as a,c as u,b as e,w as S,h as c,v as f,i as R,a as b,d as v,u as w,j as x,k as L,R as T,l as O,g as p}from"./index-Bjct3aZW.js";import{l as n}from"./index-UEr-ALEC.js";import{L as N}from"./LoopingRhombusesSpinner--em6Y6K_.js";const P={class:"flex items-center justify-center min-h-screen"},V={class:"w-90 max-w-md p-8 gap-y-6 rounded-lg"},j={class:"mt-1 pb-3"},E={class:"mt-1 pb-5"},I={class:"mt-1 pb-5"},U={class:"pb-4"},$=["disabled"],C={key:0},B={key:1,class:"h-5 flex justify-center items-center"},D={class:"text-center"},G={class:"text-sm text-rose-700"},M={href:"#",class:"font-medium text-rose-600 hover:underline"},z={__name:"LoginPage",setup(W){const g="http://10.10.30.2:8000",h=O(),l=a(""),i=a(""),d=a(""),t=a(!1),m=a(!1),y=o=>{n.error(`Login Error: ${o}`,{autoClose:2e3,position:n.POSITION.TOP_RIGHT})},_=o=>{n.success(`Login Success: ${o}`,{autoClose:2e3,position:n.POSITION.TOP_RIGHT})},k=async()=>{t.value=!0,m.value=!0;try{const o=await fetch(`${g}/api/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:l.value,password:i.value,role:d.value})});if(o.ok){const s=await o.json();_("Login Success: Access Granted."),document.cookie=`access_token=${s.access_token}; path=/; max-age=${3600*24*7}; Secure; SameSite=Strict`}else{const s=await o.json();throw new Error(s.error||"Email atau password salah")}h.push("/")}catch(o){y(o.message)}finally{t.value=!1,m.value=!1}};return(o,s)=>(p(),u("div",P,[e("div",V,[s[9]||(s[9]=e("div",null,[e("h2",{class:"text-2xl pb-3 font-bold text-center text-rose-900"}," Welcome back, readers! "),e("p",{class:"mt-2 text-sm pb-3 text-center text-rose-700"}," We've rounded up the latest stories you need to know. ")],-1)),e("form",{class:"gap-y-6",onSubmit:S(k,["prevent"])},[e("div",null,[s[3]||(s[3]=e("label",{for:"email",class:"block pb-2 text-sm font-medium text-rose-900"}," Email ",-1)),e("div",j,[c(e("input",{id:"email",name:"email",type:"text","onUpdate:modelValue":s[0]||(s[0]=r=>l.value=r),required:"",class:"w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-rose-500 focus:border-rose-500"},null,512),[[f,l.value]])])]),e("div",null,[s[4]||(s[4]=e("label",{for:"password",class:"block pb-2 text-sm font-medium text-rose-900"}," Password ",-1)),e("div",E,[c(e("input",{id:"password",name:"password",type:"password","onUpdate:modelValue":s[1]||(s[1]=r=>i.value=r),required:"",class:"w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-rose-500 focus:border-rose-500"},null,512),[[f,i.value]])])]),e("div",null,[s[6]||(s[6]=e("label",{for:"password",class:"block pb-2 text-sm font-medium text-rose-900"}," Roles ",-1)),e("div",I,[c(e("select",{id:"countries","onUpdate:modelValue":s[2]||(s[2]=r=>d.value=r),class:"block w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-rose-500 focus:border-rose-500"},[...s[5]||(s[5]=[e("option",{disabled:"",value:""},"Select Role",-1),e("option",{value:"penulis"},"Writer",-1),e("option",{value:"pembaca"},"Reader",-1)])],512),[[R,d.value]])])]),e("div",U,[e("button",{disabled:t.value,type:"submit",class:"w-full px-4 py-2 text-sm font-semibold text-rose-900 bg-rose-300 rounded-md shadow-sm hover:bg-rose-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500 transition-colors"},[t.value?b("",!0):(p(),u("div",C," Sign in ")),t.value?(p(),u("div",B,[v(w(N))])):b("",!0)],8,$)])],32),e("div",D,[e("p",G,[s[8]||(s[8]=x(" Don't have an account yet? ",-1)),e("a",M,[v(w(T),{to:"/signup"},{default:L(()=>[...s[7]||(s[7]=[x("Sign up here.",-1)])]),_:1})])])])])]))}};export{z as default};
