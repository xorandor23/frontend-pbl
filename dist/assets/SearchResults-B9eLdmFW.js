import{_ as S,a as q,F}from"./Footer-I6MyOEBl.js";import{_ as N,a as R,b as B}from"./CardNews-CT0aRdGL.js";import{r as l,o as D,c as i,a as m,b as o,d as c,e as _,u as g,s as E,F as M,f as T,g as n}from"./index-Bjct3aZW.js";import{I as A}from"./IconNewSeen-CFaQsvd5.js";const C={key:0},G={class:"sticky top-0 z-100"},J={class:"sm:px-8 lg:px-16 h-100 py-5"},V={class:"w-full h-full py-5 overflow-x-auto"},z={class:"flex flex-nowrap gap-x-7 py-5"},I={key:1,class:"flex items-center justify-center text-center h-screen py-10 text-slate-500"},L={class:"animate-spin"},O={key:2,class:"flex items-center justify-center text-center h-screen py-10 text-slate-500"},K={__name:"SearchResults",setup(H){const d=E(),a=l("2"),r=l("1"),p=l(null),u=l(),f="10.10.30.2:8000",v=e=>{const t=new Date(e),s=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],h=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],w=s[t.getDay()],x=t.getDate(),b=h[t.getMonth()],j=t.getFullYear();return`${w}, ${x} ${b} ${j}`};function y(e){const s=`; ${document.cookie}`.split(`; ${e}=`);if(s.length===2)return s.pop().split(";").shift()}const k=async()=>{try{const e=await fetch("http://10.10.30.2:8000/api/myinfo",{method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${y("access_token")}`}}),t=await e.json();if(console.log(t),e.ok)t.username?(r.value="2",p.value=t.username):r.value="1";else throw new Error(t.message||`Request gagal: ${e.status}`);a.value="1"}catch(e){r.value="1",a.value="3",console.log(e)}},$=async()=>{try{const e=await fetch(`http://10.10.30.2:8000/api/search?q=${d.query.q}&limit=20`,{method:"GET",headers:{accept:"application/json"}}),t=await e.json();if(console.log(t),!e.ok)throw new Error(t.message||`Request gagal: ${e.status}`);u.value=t,console.log(u.value)}catch(e){console.log(e)}};return D(async()=>{a.value="2";try{await Promise.all([k(),$()]),a.value="1"}catch(e){console.error("Gagal inisialisasi dashboard:",e),a.value="3"}}),(e,t)=>a.value==="1"?(n(),i("div",C,[o("nav",G,[c(S,{status:r.value,user:p.value},null,8,["status","user"]),c(q)]),o("div",null,[r.value==="1"?(n(),_(R,{key:0,tips:"Sign in or register to enjoy premium breaking news and interact with other users."})):m("",!0),c(N,{title:"Search results",subtitle:`Here's the search results for ${g(d).query.q}`},null,8,["subtitle"])]),o("div",J,[o("div",V,[o("div",z,[(n(!0),i(M,null,T(u.value.data,(s,h)=>(n(),_(B,{key:h,id:s.id_berita,title:s.judul,highlight:s.isi,link:`http://${g(f)}/storage/${s.gambar}`,date:v(s.tgl_terbit)},null,8,["id","title","highlight","link","date"]))),128))])])]),c(F)])):a.value==="2"?(n(),i("div",I,[o("div",L,[c(A)])])):a.value==="3"?(n(),i("div",O,[...t[0]||(t[0]=[o("div",null," Oh no, we couldn't reach the server right now. Check your internet connection or refresh the page back. ",-1)])])):m("",!0)}};export{K as default};
