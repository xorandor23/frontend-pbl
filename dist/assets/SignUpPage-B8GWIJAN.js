import{r,c,b as s,w as T,h as l,v as i,a as v,d as g,u as w,j as x,k as U,R as N,l as O,g as f,m as V}from"./index-Bjct3aZW.js";import{l as d}from"./index-UEr-ALEC.js";import{L as P}from"./LoopingRhombusesSpinner--em6Y6K_.js";const j={class:"flex items-center justify-center min-h-screen"},E={class:"w-90 max-w-md p-8 gap-y-6 rounded-lg"},I={class:"mt-1 pb-3"},L={class:"mt-1 pb-3"},$={class:"mt-1 pb-3"},q={class:"mt-1 pb-5"},C={class:"pb-4"},A=["disabled"],B={key:0},z={key:1,class:"h-5 flex justify-center items-center"},D={class:"text-center"},G={class:"text-sm text-rose-700"},H={href:"#",class:"font-medium text-rose-600 hover:underline"},K={__name:"SignUpPage",setup(J){const y="http://10.10.30.2:8000",h=O(),u=r(""),m=r(""),a=r(""),p=r(""),n=r(!1),b=r(!1),_=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]+$/,S=o=>{d.error(o||"Signup failed",{autoClose:9e3,position:d.POSITION.TOP_RIGHT})},k=o=>{d.success(o,{autoClose:2e3,position:d.POSITION.TOP_RIGHT})},R=async()=>{n.value=!0,b.value=!0;try{if(!V(()=>_.test(a.value)).value)throw new Error("Your password does not meet the requirements. Use a combination of at least 8 characters long contains: 1 uppercase and lowercase letter, 1 number and symbol in the following brackets (@ $ ! % * ? &).");const o=await fetch(`${y}/api/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:m.value,name:p.value,email:u.value,password:a.value,password_confirmation:a.value,role:"pembaca",membership:"free"})}),e=await o.json();if(!o.ok)throw console.log(e),new Error(e.errors.password||"Failed while signing up, please try again.");k(e.message),h.push("/login")}catch(o){S(o.message)}finally{n.value=!1,b.value=!1}};return(o,e)=>(f(),c("div",j,[s("div",E,[e[10]||(e[10]=s("div",null,[s("h2",{class:"text-2xl pb-3 font-bold text-center text-rose-900"}," Join our community! "),s("p",{class:"mt-2 text-sm pb-3 text-center text-rose-700"}," Sign up to enjoy premium articles and interactive features. ")],-1)),s("form",{class:"gap-y-6",onSubmit:T(R,["prevent"])},[s("div",null,[e[4]||(e[4]=s("label",{for:"username",class:"block pb-2 text-sm font-medium text-rose-900"}," Username ",-1)),s("div",I,[l(s("input",{id:"username",name:"username",type:"text","onUpdate:modelValue":e[0]||(e[0]=t=>m.value=t),required:"",class:"w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-rose-500 focus:border-rose-500"},null,512),[[i,m.value]])])]),s("div",null,[e[5]||(e[5]=s("label",{for:"email",class:"block pb-2 text-sm font-medium text-rose-900"}," Email ",-1)),s("div",L,[l(s("input",{id:"email",name:"email",type:"email","onUpdate:modelValue":e[1]||(e[1]=t=>u.value=t),required:"",class:"w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-rose-500 focus:border-rose-500"},null,512),[[i,u.value]])])]),s("div",null,[e[6]||(e[6]=s("label",{for:"name",class:"block pb-2 text-sm font-medium text-rose-900"}," Name ",-1)),s("div",$,[l(s("input",{id:"name",name:"name",type:"name","onUpdate:modelValue":e[2]||(e[2]=t=>p.value=t),required:"",class:"w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-rose-500 focus:border-rose-500"},null,512),[[i,p.value]])])]),s("div",null,[e[7]||(e[7]=s("label",{for:"password",class:"block pb-2 text-sm font-medium text-rose-900"}," Password ",-1)),s("div",q,[l(s("input",{id:"password",name:"password",type:"password","onUpdate:modelValue":e[3]||(e[3]=t=>a.value=t),required:"",class:"w-full px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-rose-500 focus:border-rose-500"},null,512),[[i,a.value]])])]),s("div",C,[s("button",{disabled:n.value,type:"submit",class:"w-full px-4 py-2 text-sm font-semibold text-rose-900 bg-rose-300 rounded-md shadow-sm hover:bg-rose-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500 transition-colors"},[n.value?v("",!0):(f(),c("div",B," Sign up ")),n.value?(f(),c("div",z,[g(w(P))])):v("",!0)],8,A)])],32),s("div",D,[s("p",G,[e[9]||(e[9]=x(" Already have an account? ",-1)),s("a",H,[g(w(N),{to:"/login"},{default:U(()=>[...e[8]||(e[8]=[x("Sign in here.",-1)])]),_:1})])])])])]))}};export{K as default};
