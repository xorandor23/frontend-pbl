import{m as O,x as m,y as C,z as I,A as R,B as L,C as N,D as V,r as _,E,o as H,c as $,b as d,d as S,w as P,a as T,u as j,F as q,l as B,g as k}from"./index-Bjct3aZW.js";import{_ as Y,I as G}from"./ImageUploder-uRu1nkcT.js";import{b as Z,_ as U,a as W,F as X}from"./Footer-I6MyOEBl.js";import{_ as J}from"./ExpandTextBox-CWow_tnf.js";import{l as M}from"./index-UEr-ALEC.js";import{L as K}from"./LoopingRhombusesSpinner--em6Y6K_.js";function F(e,o){return N()?(V(e,o),!0):!1}const z=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Q=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[T\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/i,ee=/[YMDHhms]o|\[([^\]]+)\]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a{1,2}|A{1,2}|m{1,2}|s{1,2}|Z{1,2}|z{1,4}|SSS/g;function te(e,o,s,u){let a=e<12?"AM":"PM";return u&&(a=a.split("").reduce((c,n)=>c+=`${n}.`,"")),s?a.toLowerCase():a}function x(e){const o=["th","st","nd","rd"],s=e%100;return e+(o[(s-20)%10]||o[s]||o[0])}function oe(e,o,s={}){var u;const a=e.getFullYear(),c=e.getMonth(),n=e.getDate(),r=e.getHours(),l=e.getMinutes(),f=e.getSeconds(),p=e.getMilliseconds(),D=e.getDay(),w=(u=s.customMeridiem)!==null&&u!==void 0?u:te,v=b=>{var h;return(h=b.split(" ")[1])!==null&&h!==void 0?h:""},y={Yo:()=>x(a),YY:()=>String(a).slice(-2),YYYY:()=>a,M:()=>c+1,Mo:()=>x(c+1),MM:()=>`${c+1}`.padStart(2,"0"),MMM:()=>e.toLocaleDateString(m(s.locales),{month:"short"}),MMMM:()=>e.toLocaleDateString(m(s.locales),{month:"long"}),D:()=>String(n),Do:()=>x(n),DD:()=>`${n}`.padStart(2,"0"),H:()=>String(r),Ho:()=>x(r),HH:()=>`${r}`.padStart(2,"0"),h:()=>`${r%12||12}`.padStart(1,"0"),ho:()=>x(r%12||12),hh:()=>`${r%12||12}`.padStart(2,"0"),m:()=>String(l),mo:()=>x(l),mm:()=>`${l}`.padStart(2,"0"),s:()=>String(f),so:()=>x(f),ss:()=>`${f}`.padStart(2,"0"),SSS:()=>`${p}`.padStart(3,"0"),d:()=>D,dd:()=>e.toLocaleDateString(m(s.locales),{weekday:"narrow"}),ddd:()=>e.toLocaleDateString(m(s.locales),{weekday:"short"}),dddd:()=>e.toLocaleDateString(m(s.locales),{weekday:"long"}),A:()=>w(r,l),AA:()=>w(r,l,!1,!0),a:()=>w(r,l,!0),aa:()=>w(r,l,!0,!0),z:()=>v(e.toLocaleDateString(m(s.locales),{timeZoneName:"shortOffset"})),zz:()=>v(e.toLocaleDateString(m(s.locales),{timeZoneName:"shortOffset"})),zzz:()=>v(e.toLocaleDateString(m(s.locales),{timeZoneName:"shortOffset"})),zzzz:()=>v(e.toLocaleDateString(m(s.locales),{timeZoneName:"longOffset"}))};return o.replace(ee,(b,h)=>{var A,t;return(A=h??((t=y[b])===null||t===void 0?void 0:t.call(y)))!==null&&A!==void 0?A:b})}function se(e){if(e===null)return new Date(NaN);if(e===void 0)return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){const o=e.match(Q);if(o){const s=o[2]-1||0,u=(o[7]||"0").substring(0,3);return new Date(o[1],s,o[3]||1,o[4]||0,o[5]||0,o[6]||0,u)}}return new Date(e)}function ae(e,o="HH:mm:ss",s={}){return O(()=>oe(se(m(e)),m(o),s))}function ne(e,o=1e3,s={}){const{immediate:u=!0,immediateCallback:a=!1}=s;let c=null;const n=C(!1);function r(){c&&(clearInterval(c),c=null)}function l(){n.value=!1,r()}function f(){const p=m(o);p<=0||(n.value=!0,a&&e(),r(),n.value&&(c=setInterval(e,p)))}return u&&z&&f(),(I(o)||typeof o=="function")&&F(R(o,()=>{n.value&&z&&f()})),F(l),{isActive:L(n),pause:l,resume:f}}const le=z?window:void 0;function re(e,o={}){const{immediate:s=!0,fpsLimit:u=void 0,window:a=le,once:c=!1}=o,n=C(!1),r=O(()=>u?1e3/m(u):null);let l=0,f=null;function p(v){if(!n.value||!a)return;l||(l=v);const y=v-l;if(r.value&&y<r.value){f=a.requestAnimationFrame(p);return}if(l=v,e({delta:y,timestamp:v}),c){n.value=!1,f=null;return}f=a.requestAnimationFrame(p)}function D(){!n.value&&a&&(n.value=!0,l=0,f=a.requestAnimationFrame(p))}function w(){n.value=!1,f!=null&&a&&(a.cancelAnimationFrame(f),f=null)}return s&&D(),F(w),{isActive:E(n),pause:w,resume:D}}function ie(e={}){const{controls:o=!1,interval:s="requestAnimationFrame",immediate:u=!0}=e,a=_(new Date),c=()=>a.value=new Date,n=s==="requestAnimationFrame"?re(c,{immediate:u}):ne(c,s,{immediate:u});return o?{now:a,...n}:a}const ue={class:"font-sans"},ce={class:"sticky top-0 z-100"},fe={class:"py-20"},de={class:"w-full flex flex-col gap-y-6 py-5 px-32"},me={class:"merriweather-bold border rounded-lg border-black text-left font-sans text-3xl gap-y-10 flex flex-col py-15 px-15 font-bold text-gray-800"},pe={class:"flex flex-row"},ve={class:"w-50 flex justify-center items-center"},ge=["disabled"],he={key:0},we={key:1,class:"h-5 flex justify-center items-center"},_e={class:"flex flex-col gap-y-6"},ye={class:"w-full h-full flex flex-col gap-y-3"},Se={class:"w-full h-full flex flex-col gap-y-3"},xe={__name:"CreateArticle",setup(e){const o=ae(ie(),"YYYY-MM-DD"),s=_("1"),u=_(null),a=_(!1),c=_(!1),n=_(""),r=_(""),l=_(""),f=B(),p=_([]),D=t=>{p.value=t},w=async()=>{try{const t=await fetch("http://10.10.30.2:8000/api/myinfo",{method:"GET",headers:{accept:"application/json",Authorization:`Bearer ${v("access_token")}`}}),i=await t.json();if(console.log(i),t.status==401)s.value="1",f.push("/login");else if(t.ok)i.username&&(s.value="2",u.value=i.username);else throw console.log(t.status),new Error(i.message||`Request gagal: ${t.status}`)}catch(t){s.value="1",console.log(t)}};function v(t){const g=`; ${document.cookie}`.split(`; ${t}=`);if(g.length===2)return g.pop().split(";").shift()}const y=t=>{M.error(`${t}`,{autoClose:2e3,position:M.POSITION.TOP_RIGHT})},b=()=>{M.success("Posted Success.",{autoClose:2e3,position:M.POSITION.TOP_RIGHT})};function h(){return l.value.split(/\n+/).map(t=>t.trim()).filter(t=>t)}O(()=>l.value.split(/\n\s*\n/));const A=async()=>{a.value=!0,c.value=!0;try{const t=new FormData;t.append("id_kategori",r.value),t.append("judul",n.value),t.append("isi",JSON.stringify(h())),console.log("WOY"),console.log(o),console.log(h()),console.log(l.value),t.append("tgl_terbit",o.value),p.value&&t.append("gambar",p.value);const i=await fetch("http://10.10.30.2:8000/api/berita/",{method:"POST",headers:{accept:"application/json",Authorization:`Bearer ${v("access_token")}`},body:t}),g=await i.json();if(!i.ok)throw y(g.message||`Request gagal: ${i.status}`),new Error(g.message);console.log("✅ Response:",g),b()}catch(t){console.error("❌ Error:",t),y(t.message||"Terjadi kesalahan")}finally{a.value=!1,c.value=!1}};return H(()=>{w()}),(t,i)=>(k(),$(q,null,[d("div",ue,[d("nav",ce,[S(U,{status:s.value,user:u.value},null,8,["status","user"]),S(W)]),d("div",fe,[d("div",de,[d("form",{onSubmit:P(A,["prevent"])},[d("div",me,[d("div",pe,[i[3]||(i[3]=d("div",{class:"w-full h-full flex flex-col gap-y-2"},[d("p",null,"Create Article"),d("p",{class:"text-xl"},"Share Your Ideas with the World.")],-1)),d("div",ve,[d("button",{disabled:a.value,type:"submit",class:"w-full px-4 py-2 text-sm font-semibold text-rose-900 bg-rose-300 rounded-md shadow-sm hover:bg-rose-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-rose-500 transition-colors"},[a.value?T("",!0):(k(),$("div",he," Post Article ")),a.value?(k(),$("div",we,[S(j(K))])):T("",!0)],8,ge)])]),d("div",_e,[d("div",ye,[S(Y,{modelValue:n.value,"onUpdate:modelValue":i[0]||(i[0]=g=>n.value=g),boxname:"Title",placeholder:"a news title..."},null,8,["modelValue"]),S(Y,{modelValue:r.value,"onUpdate:modelValue":i[1]||(i[1]=g=>r.value=g),boxname:"Category",placeholder:"example: 1"},null,8,["modelValue"]),S(J,{modelValue:l.value,"onUpdate:modelValue":i[2]||(i[2]=g=>l.value=g),boxname:"Article Body",placeholder:"type the news here..."},null,8,["modelValue"])]),d("div",Se,[i[4]||(i[4]=d("label",{for:"first_name",class:"block mb-2 text-sm py-1 font-medium text-gray-900"},"Image Covers",-1)),S(G,{"onUpdate:file":D,maxwidth:"5000",maxheight:"5000"})])])])],32)])])]),S(X)],64))}},Fe=Z(xe,[["__scopeId","data-v-8d1a51c1"]]);export{Fe as default};
